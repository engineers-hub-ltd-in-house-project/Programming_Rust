# 簡易grep実装サンプル

このサンプルは『Programming Rust』第2版の第18章「入出力」の「行の読み取り」セクションで紹介されている簡易的なgrepコマンド実装です。

## 概要

このプログラムは、Unixの`grep`コマンドを模した簡易的な検索ツールです。コマンドライン引数として与えられたパターン（文字列）とファイルを受け取り、そのファイル内でパターンを含む行を表示します。

## 学べる概念

- ファイルの読み込みと処理
- `std::io`の活用方法
- コマンドライン引数の処理
- イテレータとクロージャの応用
- エラー処理（`Result`型と`?`演算子）
- 文字列検索

## 主要コンポーネント

### `main`関数

プログラムのエントリーポイントとなる関数です。コマンドライン引数を解析し、`grep`関数を呼び出します。

### `grep`関数

指定されたパターンとファイルを受け取り、パターンを含む行を探す関数です。

```rust
fn grep<R>(target: &str, reader: R) -> io::Result<()>
where R: BufRead
{
    for line_result in reader.lines() {
        let line = line_result?;
        if line.contains(target) {
            println!("{}", line);
        }
    }
    Ok(())
}
```

## 実行方法

```bash
# ビルド
cargo build

# 実行（例：Cargo.tomlファイル内から "dependencies" という単語を含む行を検索）
cargo run dependencies Cargo.toml

# または直接バイナリを実行
./target/debug/grep pattern file.txt
```

## 学習ポイント

1. **ジェネリックな関数**: `grep`関数は型パラメータ`R`を使用して、任意の`BufRead`実装（ファイル、標準入力など）から読み込めるようにしています。

2. **トレイト境界**: `where R: BufRead`という制約により、行単位で読み込む機能を持つ型のみを引数として受け付けます。

3. **イテレータの活用**: `reader.lines()`はイテレータを返すため、`for`ループで簡潔に処理できます。

4. **エラーハンドリング**: `?`演算子を使用して、行の読み込みエラーを簡潔に処理しています。

5. **標準ライブラリの活用**: `BufReader`、`File`、`lines()`など、Rustの標準ライブラリが提供する入出力機能を活用しています。

## 発展課題

1. 正規表現を使ったパターンマッチング機能を追加する（`regex`クレートを使用）
2. 大文字・小文字を区別しないオプションを追加する
3. 再帰的にディレクトリを検索する機能を追加する
4. マッチした行の前後の行も表示するオプションを追加する
5. 複数のファイルを処理する機能を拡張する
6. 出力に色付けを行う機能を追加する（`colored`クレートなどを使用）
7. 並列処理を導入して大量のファイルを効率的に検索する 
