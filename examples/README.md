# 『Programming Rust』サンプルコード集

このリポジトリには書籍『Programming Rust』（Jim Blandy、Jason Orendorff、Leonora Tindall著）の主要なサンプルプログラムが含まれています。

各サブディレクトリは独立したRustプロジェクトであり、それぞれ独自の`Cargo.toml`ファイルを持っています。
各ディレクトリで`cargo build`と`cargo test`を実行できます。プログラムを定義しているプロジェクトでは、`cargo run`でそれらを実行できます。

このディレクトリとサブディレクトリのサンプルコードはMITライセンスの条件の下で提供されています。詳細は[LICENSE-MIT](LICENSE-MIT)をご覧ください。

## 第2章：Rustのツアー

- `gcd`ディレクトリには、数値リストの最大公約数を計算するコマンドラインプログラムがあります。

- `actix-gcd`ディレクトリには、[`actix-web`]フレームワークを使用して実装された最大公約数を計算するシンプルなWebサービスのコードがあります。
  
  注意：ここに示すコードは、フレームワークの以前のバージョンのセキュリティホールに対処するため、本に掲載されているよりも新しいバージョンの`actix-web`を使用するように更新されています。

- マンデルブロ集合描画プログラムは独自のリポジトリにあります：`https://github.com/ProgrammingRust/mandelbrot`。
  このリポジトリにはさまざまな実装戦略を示すいくつかのブランチがあります。`single-threaded`ブランチにはシングルスレッドバージョンのコードがあり、
  `bands`ブランチにはマルチスレッドバージョンがあります。第19章「並行性」では、他のアプローチもいくつか紹介しています。
  詳細はリポジトリの[README.md][mandel-readme]ファイルをご覧ください。

[`actix-web`]: https://actix.rs/

## 第8章：クレートとモジュール

- 実際にはシダのシミュレーターは作成していません。この欺瞞には心からお詫び申し上げます。しかし、本で示したモジュールと定義の骨組みは`fern_sim`サブディレクトリにあります。

## 第9章：構造体

- `queue`ディレクトリには、`char`値のキューを表す`Queue`型を定義するライブラリがあります。

- `generic-queue`ディレクトリには、汎用的な`Queue`型のコードがあります。

## 第10章：列挙型とパターン

- `binary-tree`ディレクトリには、「汎用列挙型」および「二分木への値の追加」セクションに出てくる`BinaryTree`型のソースコードがあります。

## 第12章：演算子のオーバーロード

- `complex`ディレクトリには、章全体で継続的な例として使用される`Complex`型があります。

- `interval`ディレクトリには、本で`std::cmp::PartialOrd`トレイトを実装する`Interval`型があります。

## 第14章：クロージャ

- `basic-router`ディレクトリには、「コールバック」セクションで例として使用される`BasicRouter`型があります。

## 第15章：イテレータ

- `binary-tree`ディレクトリには、元々「列挙型とパターン」の章で定義された`BinaryTree`型のための`Iterator`トレイトの実装があります。

## 第17章：文字列とテキスト

- `complex`ディレクトリには、「独自の型のフォーマット」セクションで示された複素数型のための`std::fmt::Display`フォーマットトレイトの実装が含まれています。

## 第18章：入出力

- `grep`ディレクトリには、「行の読み取り」セクションで示されたgrepに似たシンプルなプログラムがあります。

- `copy`ディレクトリには、「ディレクトリの読み取り」セクションからディレクトリツリーをコピーするプログラムがあり、次の「プラットフォーム固有の機能」セクションに示された追加機能も含まれています。

- `echo-server`ディレクトリには、「ネットワーキング」セクションで示されたシンプルなネットワークサービスがあります。

- `http-get`ディレクトリには、HTTPリクエストを実行するために`reqwest`クレートを使用するコマンドラインプログラムがあります。

## 第19章：並行性

- 本全体を通じて継続的な例として使用される検索エンジンは、独自のリポジトリにあります：`https://github.com/ProgrammingRust/fingertips`

- 「マンデルブロ集合の再検討」セクションで説明されたマンデルブロ集合プロッターも独自のリポジトリにあります：`https://github.com/ProgrammingRust/mandelbrot`
  このリポジトリには、さまざまな実装を探求するいくつかのブランチが含まれています。
  詳細はリポジトリの[README.md][mandel-readme]ファイルをご覧ください。

[mandel-readme]: https://github.com/ProgrammingRust/mandelbrot/blob/master/README.md

## 第20章：非同期プログラミング

- `cheapo-request`ディレクトリでは、`async-std`の非同期ネットワーク関数と`block_on`エグゼキューター関数を使用して、基本的なHTTPリクエストを行います。

- `many-requests`ディレクトリでは、`async-std`の`spawn_local`を使用して、単一スレッド上で複数のリクエストを同時に実行します。

- `many-requests-surf`ディレクトリでは、_crates.io_から入手できるオープンソースの非同期HTTPクライアントライブラリである`surf`を使用して同じことを行います。
  これは、この章の`cheapo_request`関数よりもHTTPをはるかに適切に処理します。

- `spawn-blocking`ディレクトリには、「プリミティブなFutureとエグゼキューター：Futureを再ポーリングする価値があるのはいつか？」セクションで説明された`spawn_blocking`の定義が含まれています。
  このクレートには、この関数をテストするためのテストも含まれています。

- `block-on`ディレクトリには、ポーリングとウェイカーの呼び出しを待機することを示すシンプルな`block_on`エグゼキューターの実装が含まれています。

- 拡張例として使用されるチャットクライアントとサーバーは、独自のリポジトリにあります：`https://github.com/ProgrammingRust/async-chat`

## 第21章：マクロ

- `json-macro`ディレクトリには、「json!マクロ」セクションで構築された`json!`マクロの定義があります。

## 第22章：unsafeコード

- `ascii`ディレクトリには、「unsafeブロック」および「unsafe関数」セクションで例として使用される`Ascii`型があります。

- `ref-with-flag`ディレクトリには、「生ポインタ」セクションからの`RefWithFlag`型があります。

- `gap-buffer`ディレクトリには、ポインタ演算と`std::ptr::read`および`std::ptr::write`を説明するために「生ポインタ」セクションで使用される`GapBuffer`型があります。

## 第23章：外部関数

- `libgit2-rs`および`libgit2-rs-safe`ディレクトリには、Rustの外部関数インターフェイスを使用して`libgit2` Cライブラリの関数を呼び出すプログラムの2つのバージョンが含まれています。
  `libgit2-rs`のバージョンは単一の巨大なunsafeコードブロックとして書かれているのに対し、`libgit2-rs-safe`のバージョンは同じ機能に対して安全なRustインターフェイスを実装しており、
  Rustの型システムを使用してlibgit2ライブラリの適切な使用ルールを強制しています。

  これらのプロジェクトはどちらも、システム上に`libgit2`のコピーが存在することを必要とします。この章では、Linux、macOS、Microsoft Windows向けに正しいバージョンをビルドするための詳細な手順を提供しています。
